/*
 * CLI tool support library
 */
plugins {
    id 'java-library'
}

tasks.withType(JavaCompile).configureEach {
    options.release = 21
}

dependencies {
    api project(':consensusj-jsonrpc')
    api 'commons-cli:commons-cli:1.10.0'

    implementation "com.fasterxml.jackson.dataformat:jackson-dataformat-toml:${jacksonVersion}"

    testImplementation "org.apache.groovy:groovy:${groovyVersion}"
    testRuntimeOnly "org.slf4j:slf4j-jdk14:${slf4jVersion}"
}

ext.moduleName = 'org.consensusj.jsonrpc.cli'
// mainClassName is deprecated -- this JAR is transitioning to being a library only
def mainClassName = "org.consensusj.jsonrpc.cli.GenericJsonRpcTool"

jar {
    manifest {
        attributes  'Implementation-Title': 'ConsensusJ JSON-RPC CLI library',
                    'Automatic-Module-Name': moduleName,
                    'Main-Class': mainClassName,
                    'Implementation-Version': archiveVersion.get()
    }
}